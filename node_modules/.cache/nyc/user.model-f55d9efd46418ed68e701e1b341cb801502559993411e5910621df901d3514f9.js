function cov_1o9df21auu(){var path="/home/leo/workout-api/api/models/user.model.js";var hash="d1d983dece32cc589b7f3d57e1151e4bbcecb6e3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/leo/workout-api/api/models/user.model.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:36}},"1":{start:{line:3,column:0},end:{line:95,column:1}},"2":{start:{line:4,column:15},end:{line:83,column:4}},"3":{start:{line:72,column:8},end:{line:74,column:9}},"4":{start:{line:73,column:10},end:{line:73,column:47}},"5":{start:{line:75,column:8},end:{line:77,column:9}},"6":{start:{line:76,column:10},end:{line:76,column:75}},"7":{start:{line:80,column:8},end:{line:80,column:37}},"8":{start:{line:85,column:26},end:{line:92,column:3}},"9":{start:{line:86,column:4},end:{line:91,column:5}},"10":{start:{line:87,column:19},end:{line:87,column:51}},"11":{start:{line:88,column:6},end:{line:88,column:46}},"12":{start:{line:90,column:6},end:{line:90,column:17}},"13":{start:{line:94,column:2},end:{line:94,column:13}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:43},end:{line:95,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:71,column:22},end:{line:71,column:23}},loc:{start:{line:71,column:53},end:{line:78,column:7}},line:71},"2":{name:"(anonymous_2)",decl:{start:{line:79,column:21},end:{line:79,column:22}},loc:{start:{line:79,column:52},end:{line:81,column:7}},line:79},"3":{name:"(anonymous_3)",decl:{start:{line:85,column:26},end:{line:85,column:27}},loc:{start:{line:85,column:48},end:{line:92,column:3}},line:85}},branchMap:{"0":{loc:{start:{line:72,column:8},end:{line:74,column:9}},type:"if",locations:[{start:{line:72,column:8},end:{line:74,column:9}},{start:{line:72,column:8},end:{line:74,column:9}}],line:72},"1":{loc:{start:{line:75,column:8},end:{line:77,column:9}},type:"if",locations:[{start:{line:75,column:8},end:{line:77,column:9}},{start:{line:75,column:8},end:{line:77,column:9}}],line:75},"2":{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:86,column:4},end:{line:91,column:5}}],line:86}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d1d983dece32cc589b7f3d57e1151e4bbcecb6e3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1o9df21auu=function(){return actualCoverage;};}return actualCoverage;}cov_1o9df21auu();const argon2=(cov_1o9df21auu().s[0]++,require("phc-argon2"));cov_1o9df21auu().s[1]++;module.exports=(sequelize,Sequelize)=>{cov_1o9df21auu().f[0]++;const User=(cov_1o9df21auu().s[2]++,sequelize.define("user",{firstname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},lastname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},email:{type:Sequelize.STRING,unique:true,allowNull:false,validate:{isEmail:true}},password:{type:Sequelize.VIRTUAL,allowNull:false,validate:{notEmpty:true,len:[6,Infinity]}},password_confirmation:{type:Sequelize.VIRTUAL},password_digest:{type:Sequelize.STRING,validate:{notEmpty:true}},age:{type:Sequelize.INTEGER,allowNull:true,validate:{min:0}},gender:{type:Sequelize.STRING,allowNull:false,validate:{isIn:[['M','F']]}},remember_digest:{type:Sequelize.STRING}},{hooks:{beforeValidate:async function(user,options){cov_1o9df21auu().f[1]++;cov_1o9df21auu().s[3]++;if(typeof user.email==='string'){cov_1o9df21auu().b[0][0]++;cov_1o9df21auu().s[4]++;user.email=user.email.toLowerCase();}else{cov_1o9df21auu().b[0][1]++;}cov_1o9df21auu().s[5]++;if(user.password!=user.password_confirmation){cov_1o9df21auu().b[1][0]++;cov_1o9df21auu().s[6]++;throw new Error("Password confirmation is not equal to password");}else{cov_1o9df21auu().b[1][1]++;}},afterValidate:async function(user,options){cov_1o9df21auu().f[2]++;cov_1o9df21auu().s[7]++;await hasSecurePassword(user);}}}));cov_1o9df21auu().s[8]++;let hasSecurePassword=async function(user){cov_1o9df21auu().f[3]++;cov_1o9df21auu().s[9]++;if(user.password){cov_1o9df21auu().b[2][0]++;const hash=(cov_1o9df21auu().s[10]++,await argon2.hash(user.password));cov_1o9df21auu().s[11]++;return user.set('password_digest',hash);}else{cov_1o9df21auu().b[2][1]++;cov_1o9df21auu().s[12]++;return true;}};cov_1o9df21auu().s[13]++;return User;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsiYXJnb24yIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJzZXF1ZWxpemUiLCJTZXF1ZWxpemUiLCJVc2VyIiwiZGVmaW5lIiwiZmlyc3RuYW1lIiwidHlwZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJsYXN0bmFtZSIsImVtYWlsIiwidW5pcXVlIiwiaXNFbWFpbCIsInBhc3N3b3JkIiwiVklSVFVBTCIsImxlbiIsIkluZmluaXR5IiwicGFzc3dvcmRfY29uZmlybWF0aW9uIiwicGFzc3dvcmRfZGlnZXN0IiwiYWdlIiwiSU5URUdFUiIsIm1pbiIsImdlbmRlciIsImlzSW4iLCJyZW1lbWJlcl9kaWdlc3QiLCJob29rcyIsImJlZm9yZVZhbGlkYXRlIiwidXNlciIsIm9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsIkVycm9yIiwiYWZ0ZXJWYWxpZGF0ZSIsImhhc1NlY3VyZVBhc3N3b3JkIiwiaGFzaCIsInNldCJdLCJtYXBwaW5ncyI6IndsRkFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFWLENBQVosQyx3QkFFQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLFNBQUQsQ0FBWUMsU0FBWixHQUEwQix5QkFDekMsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0YsU0FBUyxDQUFDRyxNQUFWLENBQWlCLE1BQWpCLENBQXlCLENBRXBDQyxTQUFTLENBQUUsQ0FDVEMsSUFBSSxDQUFFSixTQUFTLENBQUNLLE1BRFAsQ0FFVEMsU0FBUyxDQUFFLEtBRkYsQ0FHVEMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBSEQsQ0FGeUIsQ0FTcENDLFFBQVEsQ0FBRSxDQUNSTCxJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEUixDQUVSQyxTQUFTLENBQUUsS0FGSCxDQUdSQyxRQUFRLENBQUUsQ0FDUkMsUUFBUSxDQUFFLElBREYsQ0FIRixDQVQwQixDQWlCcENFLEtBQUssQ0FBRSxDQUNMTixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEWCxDQUVMTSxNQUFNLENBQUUsSUFGSCxDQUdMTCxTQUFTLENBQUUsS0FITixDQUlMQyxRQUFRLENBQUUsQ0FDUkssT0FBTyxDQUFFLElBREQsQ0FKTCxDQWpCNkIsQ0EwQnBDQyxRQUFRLENBQUUsQ0FDUlQsSUFBSSxDQUFFSixTQUFTLENBQUNjLE9BRFIsQ0FFUlIsU0FBUyxDQUFFLEtBRkgsQ0FHUkMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBRVJPLEdBQUcsQ0FBRSxDQUFDLENBQUQsQ0FBSUMsUUFBSixDQUZHLENBSEYsQ0ExQjBCLENBbUNwQ0MscUJBQXFCLENBQUUsQ0FDckJiLElBQUksQ0FBRUosU0FBUyxDQUFDYyxPQURLLENBbkNhLENBdUNwQ0ksZUFBZSxDQUFFLENBQ2ZkLElBQUksQ0FBRUosU0FBUyxDQUFDSyxNQURELENBRWZFLFFBQVEsQ0FBRSxDQUNSQyxRQUFRLENBQUUsSUFERixDQUZLLENBdkNtQixDQThDcENXLEdBQUcsQ0FBRSxDQUNIZixJQUFJLENBQUVKLFNBQVMsQ0FBQ29CLE9BRGIsQ0FFSGQsU0FBUyxDQUFFLElBRlIsQ0FHSEMsUUFBUSxDQUFFLENBQ1JjLEdBQUcsQ0FBRSxDQURHLENBSFAsQ0E5QytCLENBc0RwQ0MsTUFBTSxDQUFFLENBQ05sQixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEVixDQUVOQyxTQUFTLENBQUUsS0FGTCxDQUdOQyxRQUFRLENBQUUsQ0FDUmdCLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRCxDQUFNLEdBQU4sQ0FBRCxDQURFLENBSEosQ0F0RDRCLENBOERwQ0MsZUFBZSxDQUFFLENBQ2ZwQixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFERCxDQTlEbUIsQ0FBekIsQ0FpRVYsQ0FDRG9CLEtBQUssQ0FBRSxDQUNMQyxjQUFjLENBQUUsZUFBZ0JDLElBQWhCLENBQXNCQyxPQUF0QixDQUErQixpREFDN0MsR0FBSSxNQUFPRCxDQUFBQSxJQUFJLENBQUNqQixLQUFaLEdBQXNCLFFBQTFCLENBQW9DLG9EQUNsQ2lCLElBQUksQ0FBQ2pCLEtBQUwsQ0FBYWlCLElBQUksQ0FBQ2pCLEtBQUwsQ0FBV21CLFdBQVgsRUFBYixDQUNELENBRkQsaUNBRDZDLHdCQUk3QyxHQUFJRixJQUFJLENBQUNkLFFBQUwsRUFBaUJjLElBQUksQ0FBQ1YscUJBQTFCLENBQWlELG9EQUMvQyxLQUFNLElBQUlhLENBQUFBLEtBQUosQ0FBVSxnREFBVixDQUFOLENBQ0QsQ0FGRCxpQ0FHRCxDQVJJLENBU0xDLGFBQWEsQ0FBRSxlQUFnQkosSUFBaEIsQ0FBc0JDLE9BQXRCLENBQStCLGlEQUM1QyxLQUFNSSxDQUFBQSxpQkFBaUIsQ0FBQ0wsSUFBRCxDQUF2QixDQUNELENBWEksQ0FETixDQWpFVSxDQUFILENBQVYsQ0FEeUMsd0JBa0Z6QyxHQUFJSyxDQUFBQSxpQkFBaUIsQ0FBRyxlQUFnQkwsSUFBaEIsQ0FBc0IsaURBQzVDLEdBQUlBLElBQUksQ0FBQ2QsUUFBVCxDQUFtQiw0QkFDakIsS0FBTW9CLENBQUFBLElBQUksMkJBQUcsS0FBTXRDLENBQUFBLE1BQU0sQ0FBQ3NDLElBQVAsQ0FBWU4sSUFBSSxDQUFDZCxRQUFqQixDQUFULENBQVYsQ0FEaUIseUJBRWpCLE1BQU9jLENBQUFBLElBQUksQ0FBQ08sR0FBTCxDQUFTLGlCQUFULENBQTRCRCxJQUE1QixDQUFQLENBQ0QsQ0FIRCxJQUdPLHFEQUNMLE1BQU8sS0FBUCxDQUNELENBQ0YsQ0FQRCxDQWxGeUMseUJBMkZ6QyxNQUFPaEMsQ0FBQUEsSUFBUCxDQUNELENBNUZEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXJnb24yID0gcmVxdWlyZShcInBoYy1hcmdvbjJcIilcblxubW9kdWxlLmV4cG9ydHMgPSAoc2VxdWVsaXplLCBTZXF1ZWxpemUpID0+IHtcbiAgY29uc3QgVXNlciA9IHNlcXVlbGl6ZS5kZWZpbmUoXCJ1c2VyXCIsIHtcblxuICAgIGZpcnN0bmFtZToge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3RuYW1lOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbWFpbDoge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBpc0VtYWlsOiB0cnVlLFxuICAgICAgfVxuICAgIH0sXG5cbiAgICBwYXNzd29yZDoge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlZJUlRVQUwsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIGxlbjogWzYsIEluZmluaXR5XVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgIH0sXG5cbiAgICBwYXNzd29yZF9kaWdlc3Q6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWdlOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUixcbiAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2VuZGVyOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIGlzSW46IFtbJ00nLCAnRiddXVxuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1lbWJlcl9kaWdlc3Q6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgfVxuICB9LCB7XG4gICAgaG9va3M6IHtcbiAgICAgIGJlZm9yZVZhbGlkYXRlOiBhc3luYyBmdW5jdGlvbiAodXNlciwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIHVzZXIuZW1haWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdXNlci5lbWFpbCA9IHVzZXIuZW1haWwudG9Mb3dlckNhc2UoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyLnBhc3N3b3JkICE9IHVzZXIucGFzc3dvcmRfY29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFzc3dvcmQgY29uZmlybWF0aW9uIGlzIG5vdCBlcXVhbCB0byBwYXNzd29yZFwiKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWZ0ZXJWYWxpZGF0ZTogYXN5bmMgZnVuY3Rpb24gKHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgaGFzU2VjdXJlUGFzc3dvcmQodXNlcilcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgbGV0IGhhc1NlY3VyZVBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24gKHVzZXIpIHtcbiAgICBpZiAodXNlci5wYXNzd29yZCkge1xuICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGFyZ29uMi5oYXNoKHVzZXIucGFzc3dvcmQpXG4gICAgICByZXR1cm4gdXNlci5zZXQoJ3Bhc3N3b3JkX2RpZ2VzdCcsIGhhc2gpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFVzZXJcbn1cbiJdfQ==