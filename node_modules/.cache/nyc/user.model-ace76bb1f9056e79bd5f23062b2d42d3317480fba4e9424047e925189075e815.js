function cov_1o9df21auu(){var path="/home/leo/workout-api/api/models/user.model.js";var hash="f490b86c0305c905be31e1cf9c35ec20e2576c4d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/leo/workout-api/api/models/user.model.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:36}},"1":{start:{line:3,column:0},end:{line:90,column:1}},"2":{start:{line:4,column:15},end:{line:82,column:4}},"3":{start:{line:68,column:8},end:{line:70,column:9}},"4":{start:{line:69,column:10},end:{line:69,column:47}},"5":{start:{line:71,column:8},end:{line:73,column:9}},"6":{start:{line:72,column:10},end:{line:72,column:75}},"7":{start:{line:76,column:8},end:{line:78,column:9}},"8":{start:{line:77,column:10},end:{line:77,column:55}},"9":{start:{line:84,column:26},end:{line:87,column:5}},"10":{start:{line:85,column:17},end:{line:85,column:49}},"11":{start:{line:86,column:4},end:{line:86,column:44}},"12":{start:{line:89,column:2},end:{line:89,column:13}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:43},end:{line:90,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:67,column:22},end:{line:67,column:23}},loc:{start:{line:67,column:53},end:{line:74,column:7}},line:67},"2":{name:"(anonymous_2)",decl:{start:{line:75,column:21},end:{line:75,column:22}},loc:{start:{line:75,column:52},end:{line:80,column:7}},line:75},"3":{name:"(anonymous_3)",decl:{start:{line:84,column:26},end:{line:84,column:27}},loc:{start:{line:84,column:48},end:{line:87,column:5}},line:84}},branchMap:{"0":{loc:{start:{line:68,column:8},end:{line:70,column:9}},type:"if",locations:[{start:{line:68,column:8},end:{line:70,column:9}},{start:{line:68,column:8},end:{line:70,column:9}}],line:68},"1":{loc:{start:{line:71,column:8},end:{line:73,column:9}},type:"if",locations:[{start:{line:71,column:8},end:{line:73,column:9}},{start:{line:71,column:8},end:{line:73,column:9}}],line:71},"2":{loc:{start:{line:76,column:8},end:{line:78,column:9}},type:"if",locations:[{start:{line:76,column:8},end:{line:78,column:9}},{start:{line:76,column:8},end:{line:78,column:9}}],line:76}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f490b86c0305c905be31e1cf9c35ec20e2576c4d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1o9df21auu=function(){return actualCoverage;};}return actualCoverage;}cov_1o9df21auu();const argon2=(cov_1o9df21auu().s[0]++,require("phc-argon2"));cov_1o9df21auu().s[1]++;module.exports=(sequelize,Sequelize)=>{cov_1o9df21auu().f[0]++;const User=(cov_1o9df21auu().s[2]++,sequelize.define("user",{firstname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},lastname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},email:{type:Sequelize.STRING,unique:true,allowNull:false,validate:{isEmail:true}},password:{type:Sequelize.VIRTUAL,allowNull:false,validate:{notEmpty:true,len:[6,Infinity]}},password_confirmation:{type:Sequelize.VIRTUAL},password_digest:{type:Sequelize.STRING,validate:{notEmpty:true}},age:{type:Sequelize.INTEGER,allowNull:true,validate:{min:0}},gender:{type:Sequelize.STRING,allowNull:false,validate:{isIn:[['M','F']]}}},{hooks:{beforeValidate:async function(user,options){cov_1o9df21auu().f[1]++;cov_1o9df21auu().s[3]++;if(typeof user.email==='string'){cov_1o9df21auu().b[0][0]++;cov_1o9df21auu().s[4]++;user.email=user.email.toLowerCase();}else{cov_1o9df21auu().b[0][1]++;}cov_1o9df21auu().s[5]++;if(user.password!=user.password_confirmation){cov_1o9df21auu().b[1][0]++;cov_1o9df21auu().s[6]++;throw new Error("Password confirmation is not equal to password");}else{cov_1o9df21auu().b[1][1]++;}},afterValidate:async function(user,options){cov_1o9df21auu().f[2]++;cov_1o9df21auu().s[7]++;if(!(await hasSecurePassword(user))){cov_1o9df21auu().b[2][0]++;cov_1o9df21auu().s[8]++;throw new Error("Couldn't hash the password");}else{cov_1o9df21auu().b[2][1]++;}}}}));cov_1o9df21auu().s[9]++;let hasSecurePassword=async function(user){cov_1o9df21auu().f[3]++;const hash=(cov_1o9df21auu().s[10]++,await argon2.hash(user.password));cov_1o9df21auu().s[11]++;return user.set('password_digest',hash);};cov_1o9df21auu().s[12]++;return User;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsiYXJnb24yIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJzZXF1ZWxpemUiLCJTZXF1ZWxpemUiLCJVc2VyIiwiZGVmaW5lIiwiZmlyc3RuYW1lIiwidHlwZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJsYXN0bmFtZSIsImVtYWlsIiwidW5pcXVlIiwiaXNFbWFpbCIsInBhc3N3b3JkIiwiVklSVFVBTCIsImxlbiIsIkluZmluaXR5IiwicGFzc3dvcmRfY29uZmlybWF0aW9uIiwicGFzc3dvcmRfZGlnZXN0IiwiYWdlIiwiSU5URUdFUiIsIm1pbiIsImdlbmRlciIsImlzSW4iLCJob29rcyIsImJlZm9yZVZhbGlkYXRlIiwidXNlciIsIm9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsIkVycm9yIiwiYWZ0ZXJWYWxpZGF0ZSIsImhhc1NlY3VyZVBhc3N3b3JkIiwiaGFzaCIsInNldCJdLCJtYXBwaW5ncyI6IjBoRkFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFWLENBQVosQyx3QkFFQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLFNBQUQsQ0FBWUMsU0FBWixHQUEwQix5QkFDekMsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0YsU0FBUyxDQUFDRyxNQUFWLENBQWlCLE1BQWpCLENBQXlCLENBRXBDQyxTQUFTLENBQUUsQ0FDVEMsSUFBSSxDQUFFSixTQUFTLENBQUNLLE1BRFAsQ0FFVEMsU0FBUyxDQUFFLEtBRkYsQ0FHVEMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBSEQsQ0FGeUIsQ0FTcENDLFFBQVEsQ0FBRSxDQUNSTCxJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEUixDQUVSQyxTQUFTLENBQUUsS0FGSCxDQUdSQyxRQUFRLENBQUUsQ0FDUkMsUUFBUSxDQUFFLElBREYsQ0FIRixDQVQwQixDQWlCcENFLEtBQUssQ0FBRSxDQUNMTixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEWCxDQUVMTSxNQUFNLENBQUUsSUFGSCxDQUdMTCxTQUFTLENBQUUsS0FITixDQUlMQyxRQUFRLENBQUUsQ0FDUkssT0FBTyxDQUFFLElBREQsQ0FKTCxDQWpCNkIsQ0EwQnBDQyxRQUFRLENBQUUsQ0FDUlQsSUFBSSxDQUFFSixTQUFTLENBQUNjLE9BRFIsQ0FFUlIsU0FBUyxDQUFFLEtBRkgsQ0FHUkMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBRVJPLEdBQUcsQ0FBRSxDQUFDLENBQUQsQ0FBR0MsUUFBSCxDQUZHLENBSEYsQ0ExQjBCLENBbUNwQ0MscUJBQXFCLENBQUUsQ0FDckJiLElBQUksQ0FBRUosU0FBUyxDQUFDYyxPQURLLENBbkNhLENBdUNwQ0ksZUFBZSxDQUFFLENBQ2ZkLElBQUksQ0FBRUosU0FBUyxDQUFDSyxNQURELENBRWZFLFFBQVEsQ0FBRSxDQUNSQyxRQUFRLENBQUUsSUFERixDQUZLLENBdkNtQixDQThDcENXLEdBQUcsQ0FBRSxDQUNIZixJQUFJLENBQUVKLFNBQVMsQ0FBQ29CLE9BRGIsQ0FFSGQsU0FBUyxDQUFFLElBRlIsQ0FHSEMsUUFBUSxDQUFFLENBQ1JjLEdBQUcsQ0FBRSxDQURHLENBSFAsQ0E5QytCLENBc0RwQ0MsTUFBTSxDQUFFLENBQ05sQixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEVixDQUVOQyxTQUFTLENBQUUsS0FGTCxDQUdOQyxRQUFRLENBQUUsQ0FDUmdCLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRCxDQUFNLEdBQU4sQ0FBRCxDQURFLENBSEosQ0F0RDRCLENBQXpCLENBNkRWLENBQ0RDLEtBQUssQ0FBRSxDQUNMQyxjQUFjLENBQUUsZUFBZ0JDLElBQWhCLENBQXNCQyxPQUF0QixDQUErQixpREFDN0MsR0FBSSxNQUFPRCxDQUFBQSxJQUFJLENBQUNoQixLQUFaLEdBQXNCLFFBQTFCLENBQW9DLG9EQUNsQ2dCLElBQUksQ0FBQ2hCLEtBQUwsQ0FBYWdCLElBQUksQ0FBQ2hCLEtBQUwsQ0FBV2tCLFdBQVgsRUFBYixDQUNELENBRkQsaUNBRDZDLHdCQUk3QyxHQUFJRixJQUFJLENBQUNiLFFBQUwsRUFBaUJhLElBQUksQ0FBQ1QscUJBQTFCLENBQWlELG9EQUMvQyxLQUFNLElBQUlZLENBQUFBLEtBQUosQ0FBVSxnREFBVixDQUFOLENBQ0QsQ0FGRCxpQ0FHRCxDQVJJLENBU0xDLGFBQWEsQ0FBRSxlQUFnQkosSUFBaEIsQ0FBc0JDLE9BQXRCLENBQStCLGlEQUM1QyxHQUFJLEVBQUUsS0FBTUksQ0FBQUEsaUJBQWlCLENBQUNMLElBQUQsQ0FBekIsQ0FBSixDQUFzQyxvREFDcEMsS0FBTSxJQUFJRyxDQUFBQSxLQUFKLENBQVUsNEJBQVYsQ0FBTixDQUNELENBRkQsaUNBSUQsQ0FkSSxDQUROLENBN0RVLENBQUgsQ0FBVixDQUR5Qyx3QkFpRnpDLEdBQUlFLENBQUFBLGlCQUFpQixDQUFHLGVBQWdCTCxJQUFoQixDQUFzQix5QkFDNUMsS0FBTU0sQ0FBQUEsSUFBSSwyQkFBRyxLQUFNckMsQ0FBQUEsTUFBTSxDQUFDcUMsSUFBUCxDQUFZTixJQUFJLENBQUNiLFFBQWpCLENBQVQsQ0FBVixDQUQ0Qyx5QkFFNUMsTUFBT2EsQ0FBQUEsSUFBSSxDQUFDTyxHQUFMLENBQVMsaUJBQVQsQ0FBNEJELElBQTVCLENBQVAsQ0FDQyxDQUhILENBakZ5Qyx5QkFzRnpDLE1BQU8vQixDQUFBQSxJQUFQLENBQ0QsQ0F2RkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhcmdvbjIgPSByZXF1aXJlKFwicGhjLWFyZ29uMlwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IChzZXF1ZWxpemUsIFNlcXVlbGl6ZSkgPT4ge1xuICBjb25zdCBVc2VyID0gc2VxdWVsaXplLmRlZmluZShcInVzZXJcIiwge1xuXG4gICAgZmlyc3RuYW1lOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdG5hbWU6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICB9XG4gICAgfSxcblxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIGlzRW1haWw6IHRydWUsXG4gICAgICB9XG4gICAgfSxcblxuICAgIHBhc3N3b3JkOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgICAgbGVuOiBbNixJbmZpbml0eV1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICB9XG4gICAgfSxcblxuICAgIGFnZToge1xuICAgICAgdHlwZTogU2VxdWVsaXplLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBtaW46IDAsXG4gICAgICB9XG4gICAgfSxcblxuICAgIGdlbmRlcjoge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBpc0luOiBbWydNJywgJ0YnXV1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBob29rczoge1xuICAgICAgYmVmb3JlVmFsaWRhdGU6IGFzeW5jIGZ1bmN0aW9uICh1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXNlci5lbWFpbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB1c2VyLmVtYWlsID0gdXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIucGFzc3dvcmQgIT0gdXNlci5wYXNzd29yZF9jb25maXJtYXRpb24pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBjb25maXJtYXRpb24gaXMgbm90IGVxdWFsIHRvIHBhc3N3b3JkXCIpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhZnRlclZhbGlkYXRlOiBhc3luYyBmdW5jdGlvbiAodXNlciwgb3B0aW9ucykgeyAgICBcbiAgICAgICAgaWYgKCEoYXdhaXQgaGFzU2VjdXJlUGFzc3dvcmQodXNlcikpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgaGFzaCB0aGUgcGFzc3dvcmRcIilcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGxldCBoYXNTZWN1cmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgY29uc3QgaGFzaCA9IGF3YWl0IGFyZ29uMi5oYXNoKHVzZXIucGFzc3dvcmQpXG4gICAgcmV0dXJuIHVzZXIuc2V0KCdwYXNzd29yZF9kaWdlc3QnLCBoYXNoKVxuICAgIH1cblxuICByZXR1cm4gVXNlclxufVxuIl19