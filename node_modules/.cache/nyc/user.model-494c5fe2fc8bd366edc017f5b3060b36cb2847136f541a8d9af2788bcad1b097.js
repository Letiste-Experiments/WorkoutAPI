function cov_1o9df21auu(){var path="/home/leo/workout-api/api/models/user.model.js";var hash="fbabd378ccb265eaf3767100f121079c07d7b49b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/leo/workout-api/api/models/user.model.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:94,column:1}},"2":{start:{line:3,column:15},end:{line:82,column:4}},"3":{start:{line:71,column:8},end:{line:73,column:9}},"4":{start:{line:72,column:10},end:{line:72,column:47}},"5":{start:{line:74,column:8},end:{line:76,column:9}},"6":{start:{line:75,column:10},end:{line:75,column:75}},"7":{start:{line:79,column:8},end:{line:79,column:37}},"8":{start:{line:84,column:26},end:{line:91,column:3}},"9":{start:{line:85,column:4},end:{line:90,column:5}},"10":{start:{line:86,column:19},end:{line:86,column:51}},"11":{start:{line:87,column:6},end:{line:87,column:46}},"12":{start:{line:89,column:6},end:{line:89,column:17}},"13":{start:{line:93,column:2},end:{line:93,column:13}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:17},end:{line:2,column:18}},loc:{start:{line:2,column:43},end:{line:94,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:70,column:22},end:{line:70,column:23}},loc:{start:{line:70,column:53},end:{line:77,column:7}},line:70},"2":{name:"(anonymous_2)",decl:{start:{line:78,column:21},end:{line:78,column:22}},loc:{start:{line:78,column:52},end:{line:80,column:7}},line:78},"3":{name:"(anonymous_3)",decl:{start:{line:84,column:26},end:{line:84,column:27}},loc:{start:{line:84,column:48},end:{line:91,column:3}},line:84}},branchMap:{"0":{loc:{start:{line:71,column:8},end:{line:73,column:9}},type:"if",locations:[{start:{line:71,column:8},end:{line:73,column:9}},{start:{line:71,column:8},end:{line:73,column:9}}],line:71},"1":{loc:{start:{line:74,column:8},end:{line:76,column:9}},type:"if",locations:[{start:{line:74,column:8},end:{line:76,column:9}},{start:{line:74,column:8},end:{line:76,column:9}}],line:74},"2":{loc:{start:{line:85,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:85,column:4},end:{line:90,column:5}},{start:{line:85,column:4},end:{line:90,column:5}}],line:85}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fbabd378ccb265eaf3767100f121079c07d7b49b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1o9df21auu=function(){return actualCoverage;};}return actualCoverage;}cov_1o9df21auu();const argon2=(cov_1o9df21auu().s[0]++,require("phc-argon2"));cov_1o9df21auu().s[1]++;module.exports=(sequelize,Sequelize)=>{cov_1o9df21auu().f[0]++;const User=(cov_1o9df21auu().s[2]++,sequelize.define("user",{firstname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},lastname:{type:Sequelize.STRING,allowNull:false,validate:{notEmpty:true}},email:{type:Sequelize.STRING,unique:true,allowNull:false,validate:{isEmail:true}},password:{type:Sequelize.VIRTUAL,allowNull:false,validate:{notEmpty:true,len:[6,Infinity]}},password_confirmation:{type:Sequelize.VIRTUAL},password_digest:{type:Sequelize.STRING,validate:{notEmpty:true}},age:{type:Sequelize.INTEGER,allowNull:true,validate:{min:0}},gender:{type:Sequelize.STRING,allowNull:false,validate:{isIn:[['M','F']]}},remember_digest:{type:Sequelize.STRING}},{hooks:{beforeValidate:async function(user,options){cov_1o9df21auu().f[1]++;cov_1o9df21auu().s[3]++;if(typeof user.email==='string'){cov_1o9df21auu().b[0][0]++;cov_1o9df21auu().s[4]++;user.email=user.email.toLowerCase();}else{cov_1o9df21auu().b[0][1]++;}cov_1o9df21auu().s[5]++;if(user.password!=user.password_confirmation){cov_1o9df21auu().b[1][0]++;cov_1o9df21auu().s[6]++;throw new Error("Password confirmation is not equal to password");}else{cov_1o9df21auu().b[1][1]++;}},afterValidate:async function(user,options){cov_1o9df21auu().f[2]++;cov_1o9df21auu().s[7]++;await hasSecurePassword(user);}}}));cov_1o9df21auu().s[8]++;let hasSecurePassword=async function(user){cov_1o9df21auu().f[3]++;cov_1o9df21auu().s[9]++;if(user.password){cov_1o9df21auu().b[2][0]++;const hash=(cov_1o9df21auu().s[10]++,await argon2.hash(user.password));cov_1o9df21auu().s[11]++;return user.set('password_digest',hash);}else{cov_1o9df21auu().b[2][1]++;cov_1o9df21auu().s[12]++;return true;}};cov_1o9df21auu().s[13]++;return User;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsiYXJnb24yIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJzZXF1ZWxpemUiLCJTZXF1ZWxpemUiLCJVc2VyIiwiZGVmaW5lIiwiZmlyc3RuYW1lIiwidHlwZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJsYXN0bmFtZSIsImVtYWlsIiwidW5pcXVlIiwiaXNFbWFpbCIsInBhc3N3b3JkIiwiVklSVFVBTCIsImxlbiIsIkluZmluaXR5IiwicGFzc3dvcmRfY29uZmlybWF0aW9uIiwicGFzc3dvcmRfZGlnZXN0IiwiYWdlIiwiSU5URUdFUiIsIm1pbiIsImdlbmRlciIsImlzSW4iLCJyZW1lbWJlcl9kaWdlc3QiLCJob29rcyIsImJlZm9yZVZhbGlkYXRlIiwidXNlciIsIm9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsIkVycm9yIiwiYWZ0ZXJWYWxpZGF0ZSIsImhhc1NlY3VyZVBhc3N3b3JkIiwiaGFzaCIsInNldCJdLCJtYXBwaW5ncyI6IndsRkFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFWLENBQVosQyx3QkFDQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLFNBQUQsQ0FBWUMsU0FBWixHQUEwQix5QkFDekMsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0YsU0FBUyxDQUFDRyxNQUFWLENBQWlCLE1BQWpCLENBQXlCLENBRXBDQyxTQUFTLENBQUUsQ0FDVEMsSUFBSSxDQUFFSixTQUFTLENBQUNLLE1BRFAsQ0FFVEMsU0FBUyxDQUFFLEtBRkYsQ0FHVEMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBSEQsQ0FGeUIsQ0FTcENDLFFBQVEsQ0FBRSxDQUNSTCxJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEUixDQUVSQyxTQUFTLENBQUUsS0FGSCxDQUdSQyxRQUFRLENBQUUsQ0FDUkMsUUFBUSxDQUFFLElBREYsQ0FIRixDQVQwQixDQWlCcENFLEtBQUssQ0FBRSxDQUNMTixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEWCxDQUVMTSxNQUFNLENBQUUsSUFGSCxDQUdMTCxTQUFTLENBQUUsS0FITixDQUlMQyxRQUFRLENBQUUsQ0FDUkssT0FBTyxDQUFFLElBREQsQ0FKTCxDQWpCNkIsQ0EwQnBDQyxRQUFRLENBQUUsQ0FDUlQsSUFBSSxDQUFFSixTQUFTLENBQUNjLE9BRFIsQ0FFUlIsU0FBUyxDQUFFLEtBRkgsQ0FHUkMsUUFBUSxDQUFFLENBQ1JDLFFBQVEsQ0FBRSxJQURGLENBRVJPLEdBQUcsQ0FBRSxDQUFDLENBQUQsQ0FBSUMsUUFBSixDQUZHLENBSEYsQ0ExQjBCLENBbUNwQ0MscUJBQXFCLENBQUUsQ0FDckJiLElBQUksQ0FBRUosU0FBUyxDQUFDYyxPQURLLENBbkNhLENBdUNwQ0ksZUFBZSxDQUFFLENBQ2ZkLElBQUksQ0FBRUosU0FBUyxDQUFDSyxNQURELENBRWZFLFFBQVEsQ0FBRSxDQUNSQyxRQUFRLENBQUUsSUFERixDQUZLLENBdkNtQixDQThDcENXLEdBQUcsQ0FBRSxDQUNIZixJQUFJLENBQUVKLFNBQVMsQ0FBQ29CLE9BRGIsQ0FFSGQsU0FBUyxDQUFFLElBRlIsQ0FHSEMsUUFBUSxDQUFFLENBQ1JjLEdBQUcsQ0FBRSxDQURHLENBSFAsQ0E5QytCLENBc0RwQ0MsTUFBTSxDQUFFLENBQ05sQixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFEVixDQUVOQyxTQUFTLENBQUUsS0FGTCxDQUdOQyxRQUFRLENBQUUsQ0FDUmdCLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRCxDQUFNLEdBQU4sQ0FBRCxDQURFLENBSEosQ0F0RDRCLENBOERwQ0MsZUFBZSxDQUFFLENBQ2ZwQixJQUFJLENBQUVKLFNBQVMsQ0FBQ0ssTUFERCxDQTlEbUIsQ0FBekIsQ0FpRVYsQ0FDRG9CLEtBQUssQ0FBRSxDQUNMQyxjQUFjLENBQUUsZUFBZ0JDLElBQWhCLENBQXNCQyxPQUF0QixDQUErQixpREFDN0MsR0FBSSxNQUFPRCxDQUFBQSxJQUFJLENBQUNqQixLQUFaLEdBQXNCLFFBQTFCLENBQW9DLG9EQUNsQ2lCLElBQUksQ0FBQ2pCLEtBQUwsQ0FBYWlCLElBQUksQ0FBQ2pCLEtBQUwsQ0FBV21CLFdBQVgsRUFBYixDQUNELENBRkQsaUNBRDZDLHdCQUk3QyxHQUFJRixJQUFJLENBQUNkLFFBQUwsRUFBaUJjLElBQUksQ0FBQ1YscUJBQTFCLENBQWlELG9EQUMvQyxLQUFNLElBQUlhLENBQUFBLEtBQUosQ0FBVSxnREFBVixDQUFOLENBQ0QsQ0FGRCxpQ0FHRCxDQVJJLENBU0xDLGFBQWEsQ0FBRSxlQUFnQkosSUFBaEIsQ0FBc0JDLE9BQXRCLENBQStCLGlEQUM1QyxLQUFNSSxDQUFBQSxpQkFBaUIsQ0FBQ0wsSUFBRCxDQUF2QixDQUNELENBWEksQ0FETixDQWpFVSxDQUFILENBQVYsQ0FEeUMsd0JBa0Z6QyxHQUFJSyxDQUFBQSxpQkFBaUIsQ0FBRyxlQUFnQkwsSUFBaEIsQ0FBc0IsaURBQzVDLEdBQUlBLElBQUksQ0FBQ2QsUUFBVCxDQUFtQiw0QkFDakIsS0FBTW9CLENBQUFBLElBQUksMkJBQUcsS0FBTXRDLENBQUFBLE1BQU0sQ0FBQ3NDLElBQVAsQ0FBWU4sSUFBSSxDQUFDZCxRQUFqQixDQUFULENBQVYsQ0FEaUIseUJBRWpCLE1BQU9jLENBQUFBLElBQUksQ0FBQ08sR0FBTCxDQUFTLGlCQUFULENBQTRCRCxJQUE1QixDQUFQLENBQ0QsQ0FIRCxJQUdPLHFEQUNMLE1BQU8sS0FBUCxDQUNELENBQ0YsQ0FQRCxDQWxGeUMseUJBMkZ6QyxNQUFPaEMsQ0FBQUEsSUFBUCxDQUNELENBNUZEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXJnb24yID0gcmVxdWlyZShcInBoYy1hcmdvbjJcIilcbm1vZHVsZS5leHBvcnRzID0gKHNlcXVlbGl6ZSwgU2VxdWVsaXplKSA9PiB7XG4gIGNvbnN0IFVzZXIgPSBzZXF1ZWxpemUuZGVmaW5lKFwidXNlclwiLCB7XG5cbiAgICBmaXJzdG5hbWU6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0bmFtZToge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW1haWw6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgaXNFbWFpbDogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgICBsZW46IFs2LCBJbmZpbml0eV1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICB9XG4gICAgfSxcblxuICAgIGFnZToge1xuICAgICAgdHlwZTogU2VxdWVsaXplLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBtaW46IDAsXG4gICAgICB9XG4gICAgfSxcblxuICAgIGdlbmRlcjoge1xuICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBpc0luOiBbWydNJywgJ0YnXV1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtZW1iZXJfZGlnZXN0OiB7XG4gICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgIH1cbiAgfSwge1xuICAgIGhvb2tzOiB7XG4gICAgICBiZWZvcmVWYWxpZGF0ZTogYXN5bmMgZnVuY3Rpb24gKHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyLmVtYWlsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHVzZXIuZW1haWwgPSB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKClcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci5wYXNzd29yZCAhPSB1c2VyLnBhc3N3b3JkX2NvbmZpcm1hdGlvbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIGNvbmZpcm1hdGlvbiBpcyBub3QgZXF1YWwgdG8gcGFzc3dvcmRcIilcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFmdGVyVmFsaWRhdGU6IGFzeW5jIGZ1bmN0aW9uICh1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgIGF3YWl0IGhhc1NlY3VyZVBhc3N3b3JkKHVzZXIpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGxldCBoYXNTZWN1cmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgaWYgKHVzZXIucGFzc3dvcmQpIHtcbiAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBhcmdvbjIuaGFzaCh1c2VyLnBhc3N3b3JkKVxuICAgICAgcmV0dXJuIHVzZXIuc2V0KCdwYXNzd29yZF9kaWdlc3QnLCBoYXNoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBVc2VyXG59XG4iXX0=